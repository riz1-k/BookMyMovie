{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Riz\\\\source\\\\repos\\\\BookMyMovie_Reactjs\\\\BookMyMovie_Reactjs\\\\ClientApp\\\\src\\\\GlobalState.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport { createContext, useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nrequire('dotenv').config();\n\nconst AuthContext = /*#__PURE__*/createContext();\n\nconst AuthProvider = props => {\n  _s();\n\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const getUserData = () => {\n    const token = localStorage.getItem('token');\n    console.log(token);\n    const options = {\n      headers: {\n        'x-auth-token': token\n      }\n    };\n    axios.get(`${process.env.REACT_APP_API}`, options).then(res => {\n      setUser(res.data.user);\n      setLoading(false);\n    }).catch(err => {\n      setLoading(false);\n      setUser(null);\n      localStorage.removeItem('token');\n    });\n  };\n\n  useEffect(() => {\n    getUserData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      loading,\n      getUserData\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AuthProvider, \"NiO5z6JIqzX62LS5UWDgIqbZYyY=\");\n\n_c = AuthProvider;\nexport { AuthProvider, AuthContext };\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["C:/Users/Riz/source/repos/BookMyMovie_Reactjs/BookMyMovie_Reactjs/ClientApp/src/GlobalState.js"],"names":["axios","createContext","useState","useEffect","require","config","AuthContext","AuthProvider","props","user","setUser","loading","setLoading","getUserData","token","localStorage","getItem","console","log","options","headers","get","process","env","REACT_APP_API","then","res","data","catch","err","removeItem","children"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,aAAT,EAAwBC,QAAxB,EAAkCC,SAAlC,QAAmD,OAAnD;;;AAEAC,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AAEA,MAAMC,WAAW,gBAAGL,aAAa,EAAjC;;AACA,MAAMM,YAAY,GAAGC,KAAK,IAAI;AAAA;;AAC1B,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,CAAC,IAAD,CAAhC;AACA,QAAM,CAACS,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAAC,IAAD,CAAtC;;AACA,QAAMW,WAAW,GAAG,MAAM;AACtB,UAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AAEAC,IAAAA,OAAO,CAACC,GAAR,CAAYJ,KAAZ;AACA,UAAMK,OAAO,GAAG;AACZC,MAAAA,OAAO,EAAE;AACL,wBAAgBN;AADX;AADG,KAAhB;AAKAd,IAAAA,KAAK,CACAqB,GADL,CACU,GAAEC,OAAO,CAACC,GAAR,CAAYC,aAAc,EADtC,EACyCL,OADzC,EAEKM,IAFL,CAEUC,GAAG,IAAI;AACThB,MAAAA,OAAO,CAACgB,GAAG,CAACC,IAAJ,CAASlB,IAAV,CAAP;AACAG,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH,KALL,EAMKgB,KANL,CAMWC,GAAG,IAAI;AACVjB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAF,MAAAA,OAAO,CAAC,IAAD,CAAP;AACAK,MAAAA,YAAY,CAACe,UAAb,CAAwB,OAAxB;AACH,KAVL;AAWH,GApBD;;AAqBA3B,EAAAA,SAAS,CAAC,MAAM;AACZU,IAAAA,WAAW;AACd,GAFQ,EAEN,EAFM,CAAT;AAIA,sBACI,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE;AAAEJ,MAAAA,IAAF;AAAQE,MAAAA,OAAR;AAAiBE,MAAAA;AAAjB,KAA7B;AAAA,cACKL,KAAK,CAACuB;AADX;AAAA;AAAA;AAAA;AAAA,UADJ;AAKH,CAjCD;;GAAMxB,Y;;KAAAA,Y;AAmCN,SAASA,YAAT,EAAuBD,WAAvB","sourcesContent":["import axios from 'axios';\r\nimport { createContext, useState, useEffect } from 'react';\r\n\r\nrequire('dotenv').config();\r\n\r\nconst AuthContext = createContext();\r\nconst AuthProvider = props => {\r\n    const [user, setUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const getUserData = () => {\r\n        const token = localStorage.getItem('token');\r\n\r\n        console.log(token);\r\n        const options = {\r\n            headers: {\r\n                'x-auth-token': token,\r\n            },\r\n        };\r\n        axios\r\n            .get(`${process.env.REACT_APP_API}`, options)\r\n            .then(res => {\r\n                setUser(res.data.user);\r\n                setLoading(false);\r\n            })\r\n            .catch(err => {\r\n                setLoading(false);\r\n                setUser(null);\r\n                localStorage.removeItem('token');\r\n            });\r\n    };\r\n    useEffect(() => {\r\n        getUserData();\r\n    }, []);\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, loading, getUserData }}>\r\n            {props.children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport { AuthProvider, AuthContext };\r\n"]},"metadata":{},"sourceType":"module"}